<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Notes Gnupg | Classroom</title><meta name=keywords content="gnupg,encryption,PGP"><meta name=description content="How To Use GPG to Encrypt and Sign Messages
Introduction
GPG, or GNU Privacy Guard, is a public key cryptography implementation. This allows for the secure transmission of information between parties and can be used to verify that the origin of a message is genuine.
In this guide, we will discuss how GPG works and how to implement it. We will be using an Ubuntu 16.04 server for this demonstration, but will include instructions for other distributions as well."><meta name=author content="Animesh Roy"><link rel=canonical href=https://classroom.anir0y.in/post/notes-gnupg/><link crossorigin=anonymous href=/assets/css/stylesheet.da3211e5ef867bf2b75fd5a6515cfed7195c011e8ab735694e203810a827097b.css integrity="sha256-2jIR5e+Ge/K3X9WmUVz+1xlcAR6KtzVpTiA4EKgnCXs=" rel="preload stylesheet" as=style><link rel=icon href=https://classroom.anir0y.in/img/avatar.jpeg><link rel=icon type=image/png sizes=16x16 href=https://classroom.anir0y.in/img/avatar.jpeg><link rel=icon type=image/png sizes=32x32 href=https://classroom.anir0y.in/img/avatar.jpeg><link rel=apple-touch-icon href=https://classroom.anir0y.in/img/avatar.jpeg><link rel=mask-icon href=https://classroom.anir0y.in/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://classroom.anir0y.in/post/notes-gnupg/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><meta property="og:url" content="https://classroom.anir0y.in/post/notes-gnupg/"><meta property="og:site_name" content="Classroom"><meta property="og:title" content="Notes Gnupg"><meta property="og:description" content="How To Use GPG to Encrypt and Sign Messages Introduction GPG, or GNU Privacy Guard, is a public key cryptography implementation. This allows for the secure transmission of information between parties and can be used to verify that the origin of a message is genuine.
In this guide, we will discuss how GPG works and how to implement it. We will be using an Ubuntu 16.04 server for this demonstration, but will include instructions for other distributions as well."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2021-04-13T16:57:30+05:30"><meta property="article:modified_time" content="2021-04-13T16:57:30+05:30"><meta property="article:tag" content="Gnupg"><meta property="article:tag" content="Encryption"><meta property="article:tag" content="PGP"><meta property="og:image" content="https://classroom.anir0y.in/img/cover.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://classroom.anir0y.in/img/cover.jpg"><meta name=twitter:title content="Notes Gnupg"><meta name=twitter:description content="How To Use GPG to Encrypt and Sign Messages
Introduction
GPG, or GNU Privacy Guard, is a public key cryptography implementation. This allows for the secure transmission of information between parties and can be used to verify that the origin of a message is genuine.
In this guide, we will discuss how GPG works and how to implement it. We will be using an Ubuntu 16.04 server for this demonstration, but will include instructions for other distributions as well."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://classroom.anir0y.in/post/"},{"@type":"ListItem","position":2,"name":"Notes Gnupg","item":"https://classroom.anir0y.in/post/notes-gnupg/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Notes Gnupg","name":"Notes Gnupg","description":"How To Use GPG to Encrypt and Sign Messages Introduction GPG, or GNU Privacy Guard, is a public key cryptography implementation. This allows for the secure transmission of information between parties and can be used to verify that the origin of a message is genuine.\nIn this guide, we will discuss how GPG works and how to implement it. We will be using an Ubuntu 16.04 server for this demonstration, but will include instructions for other distributions as well.\n","keywords":["gnupg","encryption","PGP"],"articleBody":"How To Use GPG to Encrypt and Sign Messages Introduction GPG, or GNU Privacy Guard, is a public key cryptography implementation. This allows for the secure transmission of information between parties and can be used to verify that the origin of a message is genuine.\nIn this guide, we will discuss how GPG works and how to implement it. We will be using an Ubuntu 16.04 server for this demonstration, but will include instructions for other distributions as well.\nHow Public Key Encryption Works A problem that many users face is how to communicate securely and validate the identity of the party they are talking to. Many schemes that attempt to answer this question require, at least at some point, the transfer of a password or other identifying credentials, over an insecure medium.\nEnsure That Only the Intended Party Can Read To get around this issue, GPG relies on a security concept known as public key encryption. The idea is that you can split the encrypting and decrypting stages of the transmission into two separate pieces. That way, you can freely distribute the encrypting portion, as long as you secure the decrypting portion.\nThis would allow for a one-way message transfer that can be created and encrypted by anyone, but only be decrypted by the designated user (the one with the private decrypting key). If both of the parties create public/private key pairs and give each other their public encrypting keys, they can both encrypt messages to each other.\nSo in this scenario, each party has their own private key and the other user’s public key.\nValidate the Identity of the Sender Another benefit of this system is that the sender of a message can “sign” the message with their private key. The public key that the receiver has can be used to verify that the signature is actually being sent by the indicated user\nSet Up GPG Keys GPG is installed by default in most distributions.\nIf for any reason GPG is not installed, on Ubuntu and Debian, you can update the local repo index and install it by typing:\nsudo apt-get update sudo apt-get install gnupg On CentOS, you can install GPG by typing:\nsudo yum install gnupg2 To begin using GPG to encrypt your communications, you need to create a key pair. You can do this by issuing the following command:\ngpg --gen-key This will take you through a few questions that will configure your keys:\nPlease select what kind of key you want: (1) RSA and RSA (default) What keysize do you want? 4096 Key is valid for? 1y (expires after 1 year. If you are just testing, you may want to create a short-lived key the first time by using a number like “3” instead.) Is this correct? y Real name: your real name here Email address: your_email@address.com Comment: Optional comment that will be visible in your signature Change (N)ame, ©omment, (E)mail or (O)kay/(Q)uit? O Enter passphrase: Enter a secure passphrase here (upper \u0026 lower case, digits, symbols) At this point, gpg will generate the keys using entropy. Entropy describes the amount of unpredictability and nondeterminism that exists in a system. GPG needs this entropy to generate a secure set of keys.\nCreate a Revocation Certificate You need to have a way of invalidating your key pair in case there is a security breach or in case you lose your secret key. There is an easy way of doing this with the GPG software.\nThis should be done as soon as you make the key pair, not when you need it. This revocation key must be generated ahead of time and kept in a secure, separate location in case your computer is compromised or inoperable. To generate a revocation key, type:\ngpg --output ~/revocation.crt --gen-revoke your_email@address.com You will be asked to confirm the revocation key creation and then prompted for the reason that it is being revoked. This information will be visible to other users if the revocation is used in the future. You can choose any of the available options, but since this is being done ahead of time, you won’t have the specifics. Often, it is a good idea to create a revocation certificate for each of the likely scenarios for maximum flexibility.\nAfterwards, you will then be asked to supply a comment and finally, to confirm the selections. Before creating the revocation certificate, you will need to enter your GPG key’s passphrase to confirm your identity. The revocation certificate will be written to the file specified by the –output flag (revocation.crt in our example):\nOutput Revocation certificate created. Please move it to a medium which you can hide away; if Mallory gets access to this certificate he can use it to make your key unusable. It is smart to print this certificate and store it away, just in case your media become unreadable. But have some caution: The print system of your machine might store the data and make it available to others! You should immediately restrict the permissions on the generated certificate file in order to prevent unauthorized access:\nchmod 600 ~/revocation.crt The revocation certificate must be kept secure so that other users cannot revoke your key. As the message states, you should consider backing the certificate up to other machines and printing it out, as long as you can secure it properly.\nHow To Import Other Users’ Public Keys GPG would be pretty useless if you could not accept other public keys from people you wished to communicate with.\nYou can import someone’s public key in a variety of ways. If you’ve obtained a public key from someone in a text file, GPG can import it with the following command:\ngpg --import name_of_pub_key_file There is also the possibility that the person you are wishing to communicate with has uploaded their key to a public key server. These key servers are used to house people’s public keys from all over the world.\nA popular key server that syncs its information with a variety of other servers is the MIT public key server. You can search for people by their name or email address by going here in your web browser:\nhttps://keyserver.ububtu.com/ You can also search the key server from within GPG by typing the following:\ngpg --keyserver keyserver.ububtu.com --search-keys search_parameters You can use this method of searching by name or email address. You can import keys that you find by following the prompts.\nHow To Verify and Sign Keys While you can freely distribute your generated public key file and people can use this to contact you in a secure way, it is important to be able to trust that the key belongs to who you think it does during the initial public key transmission.\nVerify the Other Person’s Identity How do you know that the person giving you the public key is who they say they are? In some cases, this may be simple. You may be sitting right next to the person with your laptops both open and exchanging keys. This should be a pretty secure way of identifying that you are receiving the correct, legitimate key.\nBut there are many other circumstances where such personal contact is not possible. You may not know the other party personally, or you may be separated by physical distance. If you never want to communicate over insecure channels, verification of the public key could be problematic.\nLuckily, instead of verifying the entire public keys of both parties, you can simply compare the “fingerprint” derived from these keys. This will give you a reasonable assurance that you both are using the same public key information.\nYou can get the fingerprint of a public key by typing:\ngpg --fingerprint your_email@address.com Output pub 4096R/311B1F84 2013-10-04 Key fingerprint = CB9E C70F 2421 AF06 7D72 F980 8287 6A15 311B 1F84 uid Test User sub 4096R/8822A56A 2021-13-04 This will produce a much more manageable string of numbers to compare. You can compare this string with the person themselves, or with someone else who has access to that person.\nSign Their Key Signing a key tells your software that you trust the key that you have been provided with and that you have verified that it is associated with the person in question.\nTo sign a key that you’ve imported, simply type:\ngpg --sign-key email@example.com When you sign the key, it means you verify that you trust the person is who they claim to be. This can help other people decide whether to trust that person too. If someone trusts you, and they see that you’ve signed this person’s key, they may be more likely to trust their identity too.\nYou should allow the person whose key you are signing to take advantage of your trusted relationship by sending them back the signed key. You can do this by typing:\ngpg --output ~/signed.key --export --armor email@example.com You’ll have to type in your passphrase again. Afterwards, their public key, signed by you, will be displayed. Send them this, so that they can benefit from gaining your “stamp of approval” when interacting with others.\nWhen they receive this new, signed key, they can import it, adding the signing information you’ve generated into their GPG database. They can do this by typing:\ngpg --import ~/signed.key They can now demonstrate to other people that you trust that their identity is correct.\nHow To Make Your Public Key Highly Available Because of the way that public key encryption is designed, there is not anything malicious that can happen if unknown people have your public key.\nWith this in mind, it may be beneficial to make your public key publicly available. People can then find your information to send you messages securely from your very first interaction.\nYou can send anyone your public key by requesting it from the GPG system:\ngpg --output ~/mygpg.key --armor --export your_email@address.com Output -----BEGIN PGP PUBLIC KEY BLOCK----- Version: GnuPG v1.4.11 (GNU/Linux) mQINBFJPCuABEACiog/sInjg0O2SqgmG1T8n9FroSTdN74uGsRMHHAOuAmGLsTse 9oxeLQpN+r75Ko39RVE88dRcW710fPY0+fjSXBKhpN+raRMUKJp4AX9BJd00YA/4 EpD+8cDK4DuLlLdn1x0q41VUsznXrnMpQedRmAL9f9bL6pbLTJhaKeorTokTvdn6 5VT3pb2o+jr6NETaUxd99ZG/osPar9tNThVLIIzG1nDabcTFbMB+w7wOJuhXyTLQ JBU9xmavTM71PfV6Pkh4j1pfWImXc1D8dS+jcvKeXInBfm2XZsfOCesk12YnK3Nc u1Xe1lxzSt7Cegum4S/YuxmYoh462oGZ7FA4Cr2lvAPVpO9zmgQ8JITXiqYg2wB3 . . . You can then send this file to the other party over an appropriate medium.\nIf you want to publish your key to a key server, you can do it manually through the forms available on most of the server sites.\nAnother option is to do this through the GPG interface. Look up your key ID by typing:\ngpg --list-keys your_email@address.com The highlighted portion in the output below is the key ID (look for the pub along the left-hand column if you’re uncertain about which one to use). It is a short way to reference the key to the internal software.\nOutput pub 4096R/311B1F84 2013-10-04 uid Test User sub 4096R/8822A56A 2013-10-04 To upload your key to a certain key server, you can then use this syntax: gpg --send-keys --keyserver keyserver.ububtu.com key_id The key will be uploaded to the specified server. Afterwards, it will likely be distributed to other key servers around the world.\nEncrypt and Decrypt Messages with GPG You can easily encrypt and decrypt messages after you have shared your keys with the other party.\nEncrypt Messages You can encrypt messages using the “–encrypt” flag for GPG. The basic syntax would be:\ngpg --encrypt --sign --armor -r person@email.com name_of_file This encrypts the message using the recipient’s public key, signs it with your own private key to guarantee that it is coming from you, and outputs the message in a text format instead of raw bytes. The filename will be the same as the input filename, but with an .asc extension.\nYou should include a second “-r” recipient with your own email address if you want to be able to read the encrypted message. This is because the message will be encrypted with each person’s public key, and will only be able to be decrypted with the associated private key.\nSo if it was only encrypted with the other party’s public key, you would not be able to view the message again, unless you somehow obtained their private key. Adding yourself as a second recipient encrypts the message two separate times, one for each recipient.\nDecrypt Messages When you receive a message, simply call GPG on the message file:\ngpg file_name.asc The software will prompt you as necessary.\nIf instead of a file, you have the message as a raw text stream, you can copy and paste it after typing gpg without any arguments. You can press “CTRL-D” to signify the end of the message and GPG will decrypt it for you.\nKey Maintenance There are a number of procedures that you may need to use on a regular basis to manage your key database.\nTo list your available GPG keys that you have from other people, you can issue this command:\ngpg --list-keys Your key information can become outdated if you are relying on information pulled from public key servers. You do not want to be relying on revoked keys, because that would mean you are trusting potentially compromised keys.\nYou can update the key information by issuing:\ngpg --refresh-keys This will fetch new information from the key servers.\nYou can pull information from a specific key server by using:\ngpg --keyserver key_server --refresh-keys You may receive error messages if any of your keys cannot be found on the key server.\nConclusion Using GPG correctly can help you secure your communications with different people. This is extremely helpful, especially when dealing with sensitive information, but also when dealing with regular, everyday messaging.\nBecause of the way that certain encrypted communications can be flagged by monitoring programs, it is recommended to use encryption for everything, not just “secret” data. That will make it more difficult for people to know when you are sending important data or just sending a friendly hello\n","wordCount":"2283","inLanguage":"en","image":"https://classroom.anir0y.in/img/cover.jpg","datePublished":"2021-04-13T16:57:30+05:30","dateModified":"2021-04-13T16:57:30+05:30","author":{"@type":"Person","name":"Animesh Roy"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://classroom.anir0y.in/post/notes-gnupg/"},"publisher":{"@type":"Organization","name":"Classroom","logo":{"@type":"ImageObject","url":"https://classroom.anir0y.in/img/avatar.jpeg"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://classroom.anir0y.in/ accesskey=h title="Classroom (Alt + H)"><img src=https://classroom.anir0y.in/img/avatar.jpeg alt aria-label=logo height=35>Classroom</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://classroom.anir0y.in/post/ title=Posts><span>Posts</span></a></li><li><a href=https://classroom.anir0y.in/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://classroom.anir0y.in/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://classroom.anir0y.in/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://classroom.anir0y.in/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://classroom.anir0y.in/about/me/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://classroom.anir0y.in/>Home</a>&nbsp;»&nbsp;<a href=https://classroom.anir0y.in/post/>Posts</a></div><h1 class="post-title entry-hint-parent">Notes Gnupg</h1><div class=post-meta><span title='2021-04-13 16:57:30 +0530 IST'>April 13, 2021</span>&nbsp;·&nbsp;<span>11 min</span>&nbsp;·&nbsp;<span>Animesh Roy</span>&nbsp;|&nbsp;<span>
<a href=https://github.com/anir0y/classroom/tree/master/content/post/notes-gnupg.md rel="noopener noreferrer edit" target=_blank>Suggest Changes</a></span></div></header><figure class=entry-cover><img loading=eager src=https://classroom.anir0y.in/img/cover.jpg alt="cover image"></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#how-public-key-encryption-works>How Public Key Encryption Works</a></li><li><a href=#ensure-that-only-the-intended-party-can-read>Ensure That Only the Intended Party Can Read</a></li><li><a href=#validate-the-identity-of-the-sender>Validate the Identity of the Sender</a></li><li><a href=#set-up-gpg-keys>Set Up GPG Keys</a></li><li><a href=#create-a-revocation-certificate>Create a Revocation Certificate</a></li><li><a href=#how-to-import-other-users-public-keys>How To Import Other Users’ Public Keys</a></li><li><a href=#how-to-verify-and-sign-keys>How To Verify and Sign Keys</a><ul><li><a href=#verify-the-other-persons-identity>Verify the Other Person’s Identity</a></li></ul></li><li><a href=#sign-their-key>Sign Their Key</a></li><li><a href=#how-to-make-your-public-key-highly-available>How To Make Your Public Key Highly Available</a></li><li><a href=#decrypt-messages>Decrypt Messages</a></li><li><a href=#key-maintenance>Key Maintenance</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></details></div><div class=post-content><h1 id=how-to-use-gpg-to-encrypt-and-sign-messages>How To Use GPG to Encrypt and Sign Messages<a hidden class=anchor aria-hidden=true href=#how-to-use-gpg-to-encrypt-and-sign-messages>#</a></h1><h2 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h2><p>GPG, or GNU Privacy Guard, is a public key cryptography implementation. This allows for the secure transmission of information between parties and can be used to verify that the origin of a message is genuine.</p><p>In this guide, we will discuss how GPG works and how to implement it. We will be using an Ubuntu 16.04 server for this demonstration, but will include instructions for other distributions as well.</p><h2 id=how-public-key-encryption-works>How Public Key Encryption Works<a hidden class=anchor aria-hidden=true href=#how-public-key-encryption-works>#</a></h2><p>A problem that many users face is how to communicate securely and validate the identity of the party they are talking to. Many schemes that attempt to answer this question require, at least at some point, the transfer of a password or other identifying credentials, over an insecure medium.</p><h2 id=ensure-that-only-the-intended-party-can-read>Ensure That Only the Intended Party Can Read<a hidden class=anchor aria-hidden=true href=#ensure-that-only-the-intended-party-can-read>#</a></h2><p>To get around this issue, GPG relies on a security concept known as public key encryption. The idea is that you can split the encrypting and decrypting stages of the transmission into two separate pieces. That way, you can freely distribute the encrypting portion, as long as you secure the decrypting portion.</p><p>This would allow for a one-way message transfer that can be created and encrypted by anyone, but only be decrypted by the designated user (the one with the private decrypting key). If both of the parties create public/private key pairs and give each other their public encrypting keys, they can both encrypt messages to each other.</p><p>So in this scenario, each party has their own private key and the other user’s public key.</p><h2 id=validate-the-identity-of-the-sender>Validate the Identity of the Sender<a hidden class=anchor aria-hidden=true href=#validate-the-identity-of-the-sender>#</a></h2><p>Another benefit of this system is that the sender of a message can “sign” the message with their private key. The public key that the receiver has can be used to verify that the signature is actually being sent by the indicated user</p><h2 id=set-up-gpg-keys>Set Up GPG Keys<a hidden class=anchor aria-hidden=true href=#set-up-gpg-keys>#</a></h2><p>GPG is installed by default in most distributions.</p><p>If for any reason GPG is not installed, on Ubuntu and Debian, you can update the local repo index and install it by typing:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt-get update
</span></span><span class=line><span class=cl>sudo apt-get install gnupg
</span></span></code></pre></div><p>On CentOS, you can install GPG by typing:</p><pre tabindex=0><code>sudo yum install gnupg2
</code></pre><p>To begin using GPG to encrypt your communications, you need to create a key pair. You can do this by issuing the following command:</p><pre tabindex=0><code>gpg --gen-key
</code></pre><p>This will take you through a few questions that will configure your keys:</p><pre tabindex=0><code>Please select what kind of key you want: (1) RSA and RSA (default)

What keysize do you want? 4096
Key is valid for? 1y (expires after 1 year. If you are just testing, you may want to create a short-lived key the first time by using a number like “3” instead.)
Is this correct? y
Real name: your real name here
Email address: your_email@address.com
Comment: Optional comment that will be visible in your signature
Change (N)ame, ©omment, (E)mail or (O)kay/(Q)uit? O
Enter passphrase: Enter a secure passphrase here (upper &amp; lower case, digits, symbols)
</code></pre><p>At this point, gpg will generate the keys using entropy. Entropy describes the amount of unpredictability and nondeterminism that exists in a system. GPG needs this entropy to generate a secure set of keys.</p><h2 id=create-a-revocation-certificate>Create a Revocation Certificate<a hidden class=anchor aria-hidden=true href=#create-a-revocation-certificate>#</a></h2><p>You need to have a way of invalidating your key pair in case there is a security breach or in case you lose your secret key. There is an easy way of doing this with the GPG software.</p><p>This should be done as soon as you make the key pair, not when you need it. This revocation key must be generated ahead of time and kept in a secure, separate location in case your computer is compromised or inoperable. To generate a revocation key, type:</p><pre tabindex=0><code>gpg --output ~/revocation.crt --gen-revoke your_email@address.com
</code></pre><p>You will be asked to confirm the revocation key creation and then prompted for the reason that it is being revoked. This information will be visible to other users if the revocation is used in the future. You can choose any of the available options, but since this is being done ahead of time, you won’t have the specifics. Often, it is a good idea to create a revocation certificate for each of the likely scenarios for maximum flexibility.</p><p>Afterwards, you will then be asked to supply a comment and finally, to confirm the selections. Before creating the revocation certificate, you will need to enter your GPG key’s passphrase to confirm your identity. The revocation certificate will be written to the file specified by the &ndash;output flag (revocation.crt in our example):</p><pre tabindex=0><code>Output
Revocation certificate created.

Please move it to a medium which you can hide away; if Mallory gets
access to this certificate he can use it to make your key unusable.
It is smart to print this certificate and store it away, just in case
your media become unreadable.  But have some caution:  The print system of your machine might store the data and make it available to others!
</code></pre><p>You should immediately restrict the permissions on the generated certificate file in order to prevent unauthorized access:</p><pre tabindex=0><code>chmod 600 ~/revocation.crt
</code></pre><p>The revocation certificate must be kept secure so that other users cannot revoke your key. As the message states, you should consider backing the certificate up to other machines and printing it out, as long as you can secure it properly.</p><h2 id=how-to-import-other-users-public-keys>How To Import Other Users’ Public Keys<a hidden class=anchor aria-hidden=true href=#how-to-import-other-users-public-keys>#</a></h2><p>GPG would be pretty useless if you could not accept other public keys from people you wished to communicate with.</p><p>You can import someone’s public key in a variety of ways. If you’ve obtained a public key from someone in a text file, GPG can import it with the following command:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gpg --import name_of_pub_key_file
</span></span></code></pre></div><p>There is also the possibility that the person you are wishing to communicate with has uploaded their key to a public key server. These key servers are used to house people’s public keys from all over the world.</p><p>A popular key server that syncs its information with a variety of other servers is the MIT public key server. You can search for people by their name or email address by going here in your web browser:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>https://keyserver.ububtu.com/
</span></span></code></pre></div><p>You can also search the key server from within GPG by typing the following:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gpg --keyserver keyserver.ububtu.com  --search-keys search_parameters
</span></span></code></pre></div><p>You can use this method of searching by name or email address. You can import keys that you find by following the prompts.</p><h2 id=how-to-verify-and-sign-keys>How To Verify and Sign Keys<a hidden class=anchor aria-hidden=true href=#how-to-verify-and-sign-keys>#</a></h2><p>While you can freely distribute your generated public key file and people can use this to contact you in a secure way, it is important to be able to trust that the key belongs to who you think it does during the initial public key transmission.</p><h3 id=verify-the-other-persons-identity>Verify the Other Person’s Identity<a hidden class=anchor aria-hidden=true href=#verify-the-other-persons-identity>#</a></h3><p>How do you know that the person giving you the public key is who they say they are? In some cases, this may be simple. You may be sitting right next to the person with your laptops both open and exchanging keys. This should be a pretty secure way of identifying that you are receiving the correct, legitimate key.</p><p>But there are many other circumstances where such personal contact is not possible. You may not know the other party personally, or you may be separated by physical distance. If you never want to communicate over insecure channels, verification of the public key could be problematic.</p><p>Luckily, instead of verifying the entire public keys of both parties, you can simply compare the “fingerprint” derived from these keys. This will give you a reasonable assurance that you both are using the same public key information.</p><p>You can get the fingerprint of a public key by typing:</p><pre tabindex=0><code>gpg --fingerprint your_email@address.com
</code></pre><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Output
</span></span><span class=line><span class=cl>pub   4096R/311B1F84 2013-10-04
</span></span><span class=line><span class=cl>      Key <span class=nv>fingerprint</span> <span class=o>=</span> CB9E C70F <span class=m>2421</span> AF06 7D72  F980 <span class=m>8287</span> 6A15 311B 1F84
</span></span><span class=line><span class=cl>uid                  Test User &lt;test.user@address.com&gt;
</span></span><span class=line><span class=cl>sub   4096R/8822A56A 2021-13-04
</span></span></code></pre></div><p>This will produce a much more manageable string of numbers to compare. You can compare this string with the person themselves, or with someone else who has access to that person.</p><h2 id=sign-their-key>Sign Their Key<a hidden class=anchor aria-hidden=true href=#sign-their-key>#</a></h2><p>Signing a key tells your software that you trust the key that you have been provided with and that you have verified that it is associated with the person in question.</p><p>To sign a key that you’ve imported, simply type:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gpg --sign-key email@example.com
</span></span></code></pre></div><p>When you sign the key, it means you verify that you trust the person is who they claim to be. This can help other people decide whether to trust that person too. If someone trusts you, and they see that you’ve signed this person’s key, they may be more likely to trust their identity too.</p><p>You should allow the person whose key you are signing to take advantage of your trusted relationship by sending them back the signed key. You can do this by typing:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gpg --output ~/signed.key --export --armor email@example.com
</span></span></code></pre></div><p>You’ll have to type in your passphrase again. Afterwards, their public key, signed by you, will be displayed. Send them this, so that they can benefit from gaining your “stamp of approval” when interacting with others.</p><p>When they receive this new, signed key, they can import it, adding the signing information you’ve generated into their GPG database. They can do this by typing:</p><pre tabindex=0><code>gpg --import ~/signed.key
</code></pre><p>They can now demonstrate to other people that you trust that their identity is correct.</p><h2 id=how-to-make-your-public-key-highly-available>How To Make Your Public Key Highly Available<a hidden class=anchor aria-hidden=true href=#how-to-make-your-public-key-highly-available>#</a></h2><p>Because of the way that public key encryption is designed, there is not anything malicious that can happen if unknown people have your public key.</p><p>With this in mind, it may be beneficial to make your public key publicly available. People can then find your information to send you messages securely from your very first interaction.</p><p>You can send anyone your public key by requesting it from the GPG system:</p><pre tabindex=0><code>gpg --output ~/mygpg.key --armor --export your_email@address.com
</code></pre><pre tabindex=0><code>Output
-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: GnuPG v1.4.11 (GNU/Linux)

mQINBFJPCuABEACiog/sInjg0O2SqgmG1T8n9FroSTdN74uGsRMHHAOuAmGLsTse
9oxeLQpN+r75Ko39RVE88dRcW710fPY0+fjSXBKhpN+raRMUKJp4AX9BJd00YA/4
EpD+8cDK4DuLlLdn1x0q41VUsznXrnMpQedRmAL9f9bL6pbLTJhaKeorTokTvdn6
5VT3pb2o+jr6NETaUxd99ZG/osPar9tNThVLIIzG1nDabcTFbMB+w7wOJuhXyTLQ
JBU9xmavTM71PfV6Pkh4j1pfWImXc1D8dS+jcvKeXInBfm2XZsfOCesk12YnK3Nc
u1Xe1lxzSt7Cegum4S/YuxmYoh462oGZ7FA4Cr2lvAPVpO9zmgQ8JITXiqYg2wB3
. . .
</code></pre><p>You can then send this file to the other party over an appropriate medium.</p><p>If you want to publish your key to a key server, you can do it manually through the forms available on most of the server sites.</p><p>Another option is to do this through the GPG interface. Look up your key ID by typing:</p><pre tabindex=0><code>gpg --list-keys your_email@address.com
</code></pre><p>The highlighted portion in the output below is the key ID (look for the pub along the left-hand column if you’re uncertain about which one to use). It is a short way to reference the key to the internal software.</p><pre tabindex=0><code>Output
pub   4096R/311B1F84 2013-10-04
uid                  Test User &lt;test.user@address.com&gt;
sub   4096R/8822A56A 2013-10-04
To upload your key to a certain key server, you can then use this syntax:

gpg --send-keys --keyserver keyserver.ububtu.com key_id
</code></pre><p>The key will be uploaded to the specified server. Afterwards, it will likely be distributed to other key servers around the world.</p><p>Encrypt and Decrypt Messages with GPG
You can easily encrypt and decrypt messages after you have shared your keys with the other party.</p><p>Encrypt Messages
You can encrypt messages using the “–encrypt” flag for GPG. The basic syntax would be:</p><pre tabindex=0><code>gpg --encrypt --sign --armor -r person@email.com name_of_file
</code></pre><p>This encrypts the message using the recipient’s public key, signs it with your own private key to guarantee that it is coming from you, and outputs the message in a text format instead of raw bytes. The filename will be the same as the input filename, but with an .asc extension.</p><p>You should include a second “-r” recipient with your own email address if you want to be able to read the encrypted message. This is because the message will be encrypted with each person’s public key, and will only be able to be decrypted with the associated private key.</p><p>So if it was only encrypted with the other party’s public key, you would not be able to view the message again, unless you somehow obtained their private key. Adding yourself as a second recipient encrypts the message two separate times, one for each recipient.</p><h2 id=decrypt-messages>Decrypt Messages<a hidden class=anchor aria-hidden=true href=#decrypt-messages>#</a></h2><p>When you receive a message, simply call GPG on the message file:</p><pre tabindex=0><code>gpg file_name.asc
</code></pre><p>The software will prompt you as necessary.</p><p>If instead of a file, you have the message as a raw text stream, you can copy and paste it after typing gpg without any arguments. You can press “CTRL-D” to signify the end of the message and GPG will decrypt it for you.</p><h2 id=key-maintenance>Key Maintenance<a hidden class=anchor aria-hidden=true href=#key-maintenance>#</a></h2><p>There are a number of procedures that you may need to use on a regular basis to manage your key database.</p><p>To list your available GPG keys that you have from other people, you can issue this command:</p><pre tabindex=0><code>gpg --list-keys
</code></pre><p>Your key information can become outdated if you are relying on information pulled from public key servers. You do not want to be relying on revoked keys, because that would mean you are trusting potentially compromised keys.</p><p>You can update the key information by issuing:</p><pre tabindex=0><code>gpg --refresh-keys
</code></pre><p>This will fetch new information from the key servers.</p><p>You can pull information from a specific key server by using:</p><pre tabindex=0><code>gpg --keyserver key_server --refresh-keys
</code></pre><p>You may receive error messages if any of your keys cannot be found on the key server.</p><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>Using GPG correctly can help you secure your communications with different people. This is extremely helpful, especially when dealing with sensitive information, but also when dealing with regular, everyday messaging.</p><p>Because of the way that certain encrypted communications can be flagged by monitoring programs, it is recommended to use encryption for everything, not just “secret” data. That will make it more difficult for people to know when you are sending important data or just sending a friendly hello</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://classroom.anir0y.in/tags/gnupg/>Gnupg</a></li><li><a href=https://classroom.anir0y.in/tags/encryption/>Encryption</a></li><li><a href=https://classroom.anir0y.in/tags/pgp/>PGP</a></li></ul><nav class=paginav><a class=prev href=https://classroom.anir0y.in/post/ref-forensic/><span class=title>« Prev</span><br><span>Forensic Tools</span>
</a><a class=next href=https://classroom.anir0y.in/post/msf-runscript/><span class=title>Next »</span><br><span>Msf Runscript</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Notes Gnupg on x" href="https://x.com/intent/tweet/?text=Notes%20Gnupg&amp;url=https%3a%2f%2fclassroom.anir0y.in%2fpost%2fnotes-gnupg%2f&amp;hashtags=gnupg%2cencryption%2cPGP"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Notes Gnupg on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fclassroom.anir0y.in%2fpost%2fnotes-gnupg%2f&amp;title=Notes%20Gnupg&amp;summary=Notes%20Gnupg&amp;source=https%3a%2f%2fclassroom.anir0y.in%2fpost%2fnotes-gnupg%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Notes Gnupg on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fclassroom.anir0y.in%2fpost%2fnotes-gnupg%2f&title=Notes%20Gnupg"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Notes Gnupg on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fclassroom.anir0y.in%2fpost%2fnotes-gnupg%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Notes Gnupg on whatsapp" href="https://api.whatsapp.com/send?text=Notes%20Gnupg%20-%20https%3a%2f%2fclassroom.anir0y.in%2fpost%2fnotes-gnupg%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Notes Gnupg on telegram" href="https://telegram.me/share/url?text=Notes%20Gnupg&amp;url=https%3a%2f%2fclassroom.anir0y.in%2fpost%2fnotes-gnupg%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentColor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Notes Gnupg on ycombinator" href="https://news.ycombinator.com/submitlink?t=Notes%20Gnupg&u=https%3a%2f%2fclassroom.anir0y.in%2fpost%2fnotes-gnupg%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>YOU CAN REUSE MY CONTENT</span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>